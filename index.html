<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Café il piacere</title>

    <link href="https://fonts.googleapis.com/css?family=Belleza|PT+Sans" rel="stylesheet">

</head>
<style>
    /*Globale variabler (farver)*/
    :root {
        --orange: #C3922E;
        --sort: #1C1A18;
        --hvid: #DDCDB1;
    }

    /*nulstiller browser margin og padding*/
    * {
        margin: 0;
        padding: 0;
    }

    /*Giver body min varible farve "hvid"*/
    body {
        background: var(--hvid);
    }

    .mobile_nav {
        display: flex;
        position: relative;
        z-index: 2;
        top: 70%;
        width: 100%;
        flex-direction: column;
    }

    .mobile_nav_menu {
        margin-left: auto;
        margin-right: auto;
        padding-left: 15px;
        opacity: 0;
        transition: .3s;
        display: none;


    }

    .open_nav {
        opacity: 1;
        display: block;
    }

    li {
        list-style: none;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.9);
        text-align: left;
        padding: 10px;
        margin-left: 40px;

    }

    li a {
        text-decoration: none;
    }

    .burger {
        cursor: pointer;
        border: none;
        transition: 0.4s;
        -webkit-appearance: none;
        background-color: transparent;
        z-index: 2;
        margin-left: auto;
        margin-right: auto;

    }



    .bar1,
    .bar2,
    .bar3 {
        width: 30px;
        height: 6px;
        background-color: var(--orange);
        margin: 4px 0;
        transition: 0.4s;
        border-radius: 30%;
    }



    .change .bar1 {
        transform: rotate(-45deg) translate(-5px, 6px);
    }

    .change .bar2 {
        opacity: 0;
    }

    .change .bar3 {
        transform: rotate(45deg) translate(-7px, -10px);
    }

    .hero {
        background: url(img/lys_splash.jpg) no-repeat 50%;
        background-size: cover;
        padding-top: 0;
        position: relative;
        text-align: center;
        max-height: 600px;
        max-width: 1920px;

    }

    .hero_logo {
        background: url(img/nytLogoStort.png);
        background-size: cover;
        margin: auto;
        width: 150px;
        height: 150px;
        position: relative;
        top: 15%;

    }

    .container {
        height: 100vh;

    }

    .tekst {
        width: 100%;

    }

    article {
        padding: 1em 1em 1em 0;
        font-family: 'PT Sans', sans-serif;


    }

    .data_container {
        margin-left: auto;
        margin-right: auto;
        display: grid;
        max-width: 300px;

    }

    .menu_h2 {
        text-transform: capitalize;
    }

    .menu_item {
        border-radius: 5px;
        background: #FFF;
    }

    h1 {
        font-family: 'Belleza', sans-serif;
        font-style: normal;
        font-weight: 400;
        max-width: 300px;
        margin: 60px auto 20px;
        transition: 1s;
        color: var(--sort);

    }

    .data_h3 {
        font-family: 'Belleza', sans-serif;
        color: var(--sort);
        cursor: pointer;
        margin-bottom: 5px;
        transition: .4s;
    }

    .data_h3:hover {
        color: #9d907f;
    }

    p {
        font-family: 'PT Sans', sans-serif;
        margin: 0;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
        color: var(--sort);


    }

    .data_kortbeskrivelse,
    .data_pris {
        font-family: 'PT Sans', sans-serif;
        color: var(--sort);
    }

    #menu_knapper {
        display: flex;
        justify-content: space-around;
        max-width: 300px;
        margin: 20px auto;

    }

    .menu_item {
        border-radius: 5px;
        background: #FFF;
        font-family: 'PT Sans', sans-serif;
        padding: 5px;
        transition: 0.4s;
        cursor: pointer;

    }



    .mobile_nav_menu a {
        padding: 10px 0;
        text-decoration: none;
        font-size: 20px;
        transition: 0.3s;
        font-family: 'Belleza', sans-serif;
        color: var(--orange);


    }

    .mobile_nav_menu a:hover {
        color: rgba(195, 146, 46, 0.63);
    }

    .menu_item:hover {
        background: #dddddd;
    }

    .menu_item:focus {
        background: #b2b2b2;
        font-weight: bold;
    }

    .sticky {
        position: fixed;
        top: 0vh;
        max-width: 150px;
        margin-left: auto;
        margin-right: auto;
        left: calc(50% - 75px);
        margin-top: 5px;
    }

    .kontakt_container {
        max-width: 300px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        margin-left: auto;
        margin-right: auto;

    }

    .p_info a {
        text-decoration: none;
        font-weight: bold;
        color: var(--sort);
        transition: 0.3s;
    }

    .p_info a:hover {
        color: #766e66;
    }

    #kontakt {
        margin-bottom: 50px;
    }

    #modal {
        background-color: rgba(0, 0, 0, .6);
        width: 100vw;
        height: 100vh;
        position: fixed;
        text-align: center;
        opacity: 0;
        pointer-events: none;
        transition: 1s;
        top: 0;
    }

    #modal_content {
        width: 80%;
        height: 50%;
        /*background-color: rgba(250, 250, 250, 0);*/
        margin: 5vh auto;

    }

    #modal.vis {
        opacity: 1;
        pointer-events: all;
        transition: 0.5s;
    }

    #modal img {
        max-width: 100%;
        max-height: 100%;
        border-radius: 3%;
    }



    .close {
        width: 10%;
        height: 5%;
        cursor: pointer;
        margin: 20vh auto 0 auto;
        background: var(--hvid);
        border: 0;
        transition: .4s;
    }

    .close:hover {
        background: #766e66;
    }




    @media screen and (min-width:550px) {

        .data_container,
        h1,
        p,
        #menu_knapper,
        .kontakt_container {
            max-width: 400px;
        }

        .menu_item {

            padding: 6px 10px;
        }

    }

    @media screen and (min-width:680px) {

        .data_container,
        h1,
        p,
        #menu_knapper {
            max-width: 600px;

        }

        .menu_item {

            padding: 7px 20px;
        }

        .data_container {
            grid-template-columns: 1fr 1fr;
            grid-column-gap: 10%;
        }
    }

    @media screen and (min-width:1050px) {

        .data_container,
        h1,
        p,
        #menu_knapper {
            max-width: 800px;

        }

        #kontakt {
            margin-bottom: 80px;
        }

        .data_container {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }

    @media screen and (min-width:1250px) {

        .data_container,
        h1,
        p {
            max-width: 1000px;
        }
    }
</style>

<body>

    <!--Modal-vindue container, skjult, men dukker op, når en ret bliver trykket på-->
    <section id="modal">

        <!--Knap til at lukke modal-vinduet-->
        <button class="close">&#10006;</button>


        <!--Container til modal-vinduets billede-->

        <div id="modal_content">

            <!--tomt img-tag, til rettens billede-->


            <img class="modal_billede" src="" alt="">
        </div>

    </section>

    <div class="wrapper">

        <!--Div som er container for logo og navbar. Har en baggrund, som er splashbilledet-->

        <div id="home" class="hero">
            <div class="container">

                <!--Hero_logo har logoet som baggrund og mobile_nav indeni-->

                <div class="hero_logo">
                    <nav class="mobile_nav">

                        <button class="burger">
                            <div class="bar1"></div>
                            <div class="bar2"></div>
                            <div class="bar3"></div>
                        </button>



                        <ul class="mobile_nav_menu">
                            <li><a href="index.html#om">Om</a></li>
                            <li><a href="index.html#menu">Menu</a></li>
                            <li><a href="index.html#kontakt">Kontakt</a></li>
                        </ul>
                    </nav>

                </div>
            </div>
        </div>


        <!--Div som indeholder afsnittet "om"-->
        <div id="om">

            <div class="tekst">
                <h1>Om il piacere</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Commodi quas quaerat saepe possimus fugit, recusandae, magni corporis quo veritatis vero delectus necessitatibus incidunt aperiam ab sapiente ratione tempora ipsum voluptatem.</p><br>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Explicabo modi, eveniet animi harum a iusto assumenda esse eligendi quia similique quibusdam ullam nemo, temporibus fugiat consequatur voluptate mollitia! Sed, fugit.</p><br>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Explicabo modi, eveniet animi harum a iusto assumenda esse eligendi quia similique quibusdam ullam nemo, temporibus fugiat consequatur voluptate mollitia! Sed, fugit.</p>

            </div>


        </div>



        <div id="menu">
            <h1>Menukort</h1>

            <!--Filtreringsknapperne til menu-afsnittet-->
            <div id="menu_knapper">
                <button class="menu_item" data_kategori="alle">Alle</button>
                <button class="menu_item" data_kategori="pasta">Pasta</button>
                <button class="menu_item" data_kategori="pizza">Pizza</button>
                <button class="menu_item" data_kategori="koed">Kød</button>
                <button class="menu_item" data_kategori="dessert">Dessert</button>
                <button class="menu_item" data_kategori="drikke">Drikke</button>
            </div>


            <main class="retter_container">

                <!--Container til visning af retterne-->

                <section class="data_container"></section>
            </main>

            <!--Template til visning af retter fra json-filen-->
            <template class="data_template">
                <article class="retter">

                    <!--Tomme tags, til indsætning af retternes navn, beskrivelse og pris-->


                    <h3 class="data_h3"></h3>
                    <span class="data_beskrivelse"></span><br>
                    <span class="data_pris"></span><br>

                </article>
            </template>
        </div>




        <div id="kontakt">

            <!--Container til kontakt-->

            <div class="kontakt_container">
                <div class="kontakt_info">
                    <h1 class="h1_kontakt">
                        Kontakt
                    </h1>
                    <p class="p_info">
                        Café il Piacere
                    </p>
                    <p class="p_info">
                        Gråbrødretorv 1, <br> 1154 København
                    </p>
                    <p class="p_info">
                        Tlf: 27 89 08 55
                    </p>
                    <p class="p_info">
                        <a href="mailto:mail@ilpiacere.dk">mail@ilpiacere.dk</a>
                    </p>
                </div>
                <div class="kontakt_tider">
                    <h1 class="h1_tider">
                        Åbningstider
                    </h1>
                    <p class="p_tider">
                        Åbent alle dage 11-23.
                    </p>
                </div>

            </div>

        </div>

    </div>


    <script>
        /*modal = containeren for modalvinduet*/
        let modal = document.querySelector("#modal");

        /*retter bliver sat til at være en tom variabel, så den kan bruges senere i diverse funktioner*/

        let retter;

        /*dest bliver sat til containeren for retterne, da det er "destinationen" vi gerne vil have dem i*/

        let dest = document.querySelector(".data_container");


        /*definerer madFilter som alle, for at filtrere retterne ud fra deres kategorier i senere funktioner*/

        madFilter = "alle";

        /*Når DOM-content er loaded, skal hentJson starte*/

        document.addEventListener("DOMContentLoaded", hentJson);


        /*laver en eventlistener til hver menu_item (knap) og starter filtrering*/


        document.querySelectorAll(".menu_item").forEach(knap => {
            knap.addEventListener("click", filtrering)
        });


        /*tager værdien fra data_kategori og sætter ind som ny variabel i madfilter, hvorefter den kalder visRetter*/

        function filtrering() {
            dest.textContent = "";
            madFilter = this.getAttribute("data_kategori");
            visRetter();
        }


        /*Indlæser json-fil og indsætter retterne i arrayet "retter"*/

        async function hentJson() {
            let myJson = await fetch("menu.json");
            retter = await myJson.json();
            visRetter();
        }

        /*Viser alle retter (medmindre filterering har været kaldt, så viser den kun retter med samme data_kategori som madFilter)
        Template til hver ret hentes fra template-tagget
        .data_h3 får eventlistener som starter visModal*/

        function visRetter() {
            let temp = document.querySelector(".data_template");
            //løb personlisten igennem og lav en klon
            retter.forEach(retter => {
                if (retter.kategori == madFilter || madFilter == "alle") {


                    let klon = temp.cloneNode(true).content;
                    //indsæt data i klonen

                    klon.querySelector(".data_h3").textContent = retter.navn;
                    klon.querySelector(".data_beskrivelse").textContent = retter.beskrivelse;
                    klon.querySelector(".data_pris").textContent = "Pris: " + retter.pris + ",-";
                    klon.querySelector(".data_h3").addEventListener("click", () => {
                        visModal(retter);
                    });


                    //placer klon i DOM
                    dest.appendChild(klon);
                }
            })
        }

        /*Viser den valgte ret i et modalvindue
        Tilføjer eventlistener til modalvinduets close-knap som starter skjulModal
        Giver nav en display:none*/

        function visModal(retten) {
            let navbar = document.querySelector(".hero_logo");
            modal.classList.add("vis");
            modal.querySelector(".modal_billede").src = "img/" + retten.billede + ".jpg";
            modal.querySelector(".modal_billede").alt = "Foto af" + retten.navn;

            navbar.style.display = "none";
            /*document.querySelector(".wrapper").style.background = "rgba(0, 0, 0, .6)";*/

            document.querySelector(".hero").style.position = "absolute"; /**/
            modal.querySelector("button").addEventListener("click", skjulModal);
            /*document.querySelector(".wrapper").style.transition = "all 1s";*/


        }

        /*Fjerner modalvinduet og giver nav display:fixed igen*/

        function skjulModal() {
            modal.classList.remove("vis");
            navbar.style.display = "block";
            /*  document.querySelector(".wrapper").style.background = "rgba(0, 0, 0, 0)";*/
            document.querySelector(".hero").style.position = "relative";
            /* document.querySelector(".wrapper").style.transition = "all 1s";*/
        }

        /*navbar = logo*/
        let navbar = document.querySelector(".hero_logo");

        /*sticky er = afstanden som navbar (logoet) har til toppen af siden*/
        let sticky = navbar.offsetTop;

        /*Når man har scrollet så meget at afstanden i browseren er lig eller mindre afstanden som logoet havde til toppen fra start, får logoet en class som indeholder position:fixed, som får den til at følge med scroll*/

        window.onscroll = function() {
            if (window.pageYOffset >= sticky)
                navbar.classList.add("sticky")
            else {
                navbar.classList.remove("sticky");
            }
        }

        /*Tilføjer eventlistener til burgermenuen, så den både åbner og lukker*/

        document.querySelector(".burger").addEventListener("click", toggleMenu);

        function toggleMenu() {
            document.querySelector(".burger").classList.toggle("change");


            if (document.querySelector("ul").style.display === "none") {
                setTimeout(navShow, 1000);
                document.querySelector("ul").style.display = block;
            } else {
                document.querySelector("ul").classList.toggle("open_nav");
                setTimeout(hideNav, 1000);

            }

            function navShow() {
                document.querySelector("ul").classList.toggle("open_nav");

            }

            function hideNav() {
                document.querySelector("ul").style.display = none;

            }
        }
        /*Eventlistener til logoet, som ruller siden tilbage til toppen*/
        document.querySelector(".hero_logo").addEventListener("click", () => {
            document.documentElement.scrollTop = 0;
        });
    </script>
</body>

</html>
